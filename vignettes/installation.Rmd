---
title: "BrepPhylo: Installation instructions"
author:
  - "Christian Margreitter"
  - "Alexander Stewart"
  - "Deborah Dunn-Walters"
  - "Franca Fraternali"
date: "`r Sys.Date()`"
output:
  pdf_document:
    fig_width: 12
    number_sections: yes
  html_document:
    fig_width: 12
    highlight: pygments
    number_sections: yes
vignette: >
  %\VignetteIndexEntry{Installation instructions}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
bibliography: bibliography.bib
csl: nar-webserver-issue.csl
---
\fontsize{10}{10}
<style>
body {
text-align: justify}
</style>
```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

# Introduction
This vignette describes the installation process for this package, i.e. how to meet certain external dependencies. For now, the package has only been tested for the Ubuntu 16, 64 bit OS. Other up-to-date Linux distributions should work as well. An R version >= 3.4.0 is necessary. The R IDE `RStudio` is recommended for usage of this package. There is no public git repository for this package.

# Preparation
Thie `BrepPhylo` package is comparably large and implements different branches of Bioinformatics analyses. Thus, the number of required packages is large and the default value of how many packages can be loaded at a given time is likely to be exceeded when loading the package. This number can be increased (see Ubuntu instructions below).

```{r, engine = "bash", eval = FALSE}
# open the configuration file as super-user in a terminal
sudo gedit /usr/lib/R/etc/Renviron

# insert the following as last line and save
R_MAX_NUM_DLLS=512

# restart R
```

# Non-R dependencies

## IgPhyML
The [IgPhyML program](http://evolve.zoo.ox.ac.uk/Evolve/IgPhyML.html) [@hoehn_phylogenetic_2017] supports the construction of phylogenetic trees for B cell lineages with a special, optimized position-specific model. If function `cloneLineage` is to operate with a tree construction algorithm other than the in-built "simple" one, this program is mandatory.

### Install IgPhyML

* Install required libraries
```{r, engine = "bash", eval = FALSE}
sudo apt-get install libatlas-base-dev
```
* Download source code from [the github repository](https://github.com/kbhoehn/IgPhyML)
* Build and install the appropriate version (recommended is the version with both BLAS and OpenMP)

```{r, engine = "bash", eval = FALSE}
cd /<your_path>/IgPhyML
./make_phyml_blas_omp
sudo make install
```

# R dependencies
Most R packages required for the `BrepPhylo` package will be installed upon the package's installation. But one exception will be the required `BrepTools` package, which bundles a set of functionalities used by multiple packages. `BrepTools` currently is only available as an in-house distribution.

# Bibliography
